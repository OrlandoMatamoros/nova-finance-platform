"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai/analyze/route";
exports.ids = ["app/api/ai/analyze/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fanalyze%2Froute&page=%2Fapi%2Fai%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fanalyze%2Froute.ts&appDir=%2Fworkspaces%2Fnova-finance-platform%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fnova-finance-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fanalyze%2Froute&page=%2Fapi%2Fai%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fanalyze%2Froute.ts&appDir=%2Fworkspaces%2Fnova-finance-platform%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fnova-finance-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _workspaces_nova_finance_platform_app_api_ai_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ai/analyze/route.ts */ \"(rsc)/./app/api/ai/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai/analyze/route\",\n        pathname: \"/api/ai/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai/analyze/route\"\n    },\n    resolvedPagePath: \"/workspaces/nova-finance-platform/app/api/ai/analyze/route.ts\",\n    nextConfigOutput,\n    userland: _workspaces_nova_finance_platform_app_api_ai_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/ai/analyze/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaSUyRmFuYWx5emUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFpJTJGYW5hbHl6ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZ3b3Jrc3BhY2VzJTJGbm92YS1maW5hbmNlLXBsYXRmb3JtJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZ3b3Jrc3BhY2VzJTJGbm92YS1maW5hbmNlLXBsYXRmb3JtJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2E7QUFDMUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3ZhLWZpbmFuY2UtcGxhdGZvcm0vPzc1YjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL3dvcmtzcGFjZXMvbm92YS1maW5hbmNlLXBsYXRmb3JtL2FwcC9hcGkvYWkvYW5hbHl6ZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWkvYW5hbHl6ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FpL2FuYWx5emVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FpL2FuYWx5emUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvd29ya3NwYWNlcy9ub3ZhLWZpbmFuY2UtcGxhdGZvcm0vYXBwL2FwaS9haS9hbmFseXplL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FpL2FuYWx5emUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fanalyze%2Froute&page=%2Fapi%2Fai%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fanalyze%2Froute.ts&appDir=%2Fworkspaces%2Fnova-finance-platform%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fnova-finance-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ai/analyze/route.ts":
/*!*************************************!*\
  !*** ./app/api/ai/analyze/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_services_gemini__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/services/gemini */ \"(rsc)/./lib/services/gemini.ts\");\n// app/api/ai/analyze/route.ts\n\n\n// Manejar OPTIONS para CORS\nasync function OPTIONS(request) {\n    return new next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"](null, {\n        status: 200,\n        headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE, OPTIONS\",\n            \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\"\n        }\n    });\n}\nasync function POST(request) {\n    console.log(\"API Route /api/ai/analyze called\");\n    try {\n        // Parsear el body\n        const body = await request.json();\n        const { prompt, test } = body;\n        // Si es una llamada de test, solo responder OK\n        if (test) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                message: \"API route is working\"\n            });\n        }\n        if (!prompt) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"El prompt es requerido\"\n            }, {\n                status: 400\n            });\n        }\n        // Verificar si tenemos API key\n        const apiKey = process.env.GEMINI_API_KEY || \"AIzaSyB_nrbCNAYMesrpGshnDaPSz6pNlW8kksg\";\n        if (!apiKey) {\n            console.error(\"No API key found in environment variables\");\n            // En lugar de fallar, devolver un análisis de demo\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                response: generateDemoAnalysis(),\n                demo: true\n            });\n        }\n        // Usar el servicio de Gemini\n        const gemini = new _lib_services_gemini__WEBPACK_IMPORTED_MODULE_1__.GeminiService(apiKey);\n        const result = await gemini.generateContent(prompt);\n        if (!result.success) {\n            console.error(\"Gemini service error:\", result.error);\n            // Si falla Gemini, devolver análisis de demo\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                response: generateDemoAnalysis(),\n                demo: true,\n                originalError: result.error\n            });\n        }\n        // Respuesta exitosa de Gemini\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            response: result.response,\n            demo: false\n        });\n    } catch (error) {\n        console.error(\"API Route Error:\", error);\n        // En caso de error, devolver análisis de demo\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            response: generateDemoAnalysis(),\n            demo: true,\n            error: error instanceof Error ? error.message : \"Error desconocido\"\n        });\n    }\n}\n// Función para generar análisis de demo cuando Gemini no está disponible\nfunction generateDemoAnalysis() {\n    const insights = [\n        {\n            tipo: \"success\",\n            titulo: \"Margen de Ganancia Saludable\",\n            descripcion: \"Tu margen del 35% supera el promedio del sector (30%). Mant\\xe9n esta eficiencia operativa.\",\n            impacto: \"high\",\n            metrica: \"35%\",\n            accion: false\n        },\n        {\n            tipo: \"warning\",\n            titulo: \"Costos Laborales Elevados\",\n            descripcion: \"Los costos de personal (28%) exceden el objetivo del 25%. Revisa horarios en horas valle.\",\n            impacto: \"medium\",\n            metrica: \"28%\",\n            accion: true\n        },\n        {\n            tipo: \"opportunity\",\n            titulo: \"Potencial en Ticket Promedio\",\n            descripcion: \"Aumentar $5 el ticket promedio generar\\xeda $15,000 adicionales al mes.\",\n            impacto: \"high\",\n            metrica: \"+$15K\",\n            accion: true\n        },\n        {\n            tipo: \"opportunity\",\n            titulo: \"Optimizaci\\xf3n de Inventario\",\n            descripcion: \"Reducir inventario lento en 20% liberar\\xeda $8,000 en capital de trabajo.\",\n            impacto: \"medium\",\n            metrica: \"$8K\",\n            accion: true\n        },\n        {\n            tipo: \"info\",\n            titulo: \"Crecimiento de Clientes\",\n            descripcion: \"Base de clientes creci\\xf3 15% este mes. Implementa programa de fidelizaci\\xf3n.\",\n            impacto: \"medium\",\n            metrica: \"+15%\",\n            accion: false\n        }\n    ];\n    // Formatear como respuesta de Gemini\n    return insights.map((insight)=>`\n[TIPO]: ${insight.tipo}\n[TÍTULO]: ${insight.titulo}\n[DESCRIPCIÓN]: ${insight.descripcion}\n[IMPACTO]: ${insight.impacto}\n[MÉTRICA]: ${insight.metrica}\n[ACCIÓN]: ${insight.accion}\n  `).join(\"\\n\\n\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ1Y7S0FDRDtJQUVELHFDQUFxQztJQUNyQyxPQUFPTixTQUFTTyxHQUFHLENBQUNDLENBQUFBLFVBQVcsQ0FBQztRQUMxQixFQUFFQSxRQUFRUCxJQUFJLENBQUM7VUFDYixFQUFFTyxRQUFRTixNQUFNLENBQUM7ZUFDWixFQUFFTSxRQUFRTCxXQUFXLENBQUM7V0FDMUIsRUFBRUssUUFBUUosT0FBTyxDQUFDO1dBQ2xCLEVBQUVJLFFBQVFILE9BQU8sQ0FBQztVQUNuQixFQUFFRyxRQUFRRixNQUFNLENBQUM7RUFDekIsQ0FBQyxFQUFFRyxJQUFJLENBQUM7QUFDViIsInNvdXJjZXMiOlsid2VicGFjazovL25vdmEtZmluYW5jZS1wbGF0Zm9ybS8uL2FwcC9hcGkvYWkvYW5hbHl6ZS9yb3V0ZS50cz8zZjI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcC9hcGkvYWkvYW5hbHl6ZS9yb3V0ZS50c1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgR2VtaW5pU2VydmljZSB9IGZyb20gJ0AvbGliL3NlcnZpY2VzL2dlbWluaSdcblxuLy8gTWFuZWphciBPUFRJT05TIHBhcmEgQ09SU1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIE9QVElPTlMocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UobnVsbCwge1xuICAgIHN0YXR1czogMjAwLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyxcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicsXG4gICAgfSxcbiAgfSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc29sZS5sb2coJ0FQSSBSb3V0ZSAvYXBpL2FpL2FuYWx5emUgY2FsbGVkJylcbiAgXG4gIHRyeSB7XG4gICAgLy8gUGFyc2VhciBlbCBib2R5XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc3QgeyBwcm9tcHQsIHRlc3QgfSA9IGJvZHlcblxuICAgIC8vIFNpIGVzIHVuYSBsbGFtYWRhIGRlIHRlc3QsIHNvbG8gcmVzcG9uZGVyIE9LXG4gICAgaWYgKHRlc3QpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgbWVzc2FnZTogJ0FQSSByb3V0ZSBpcyB3b3JraW5nJyBcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKCFwcm9tcHQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0VsIHByb21wdCBlcyByZXF1ZXJpZG8nIFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgc2kgdGVuZW1vcyBBUEkga2V5XG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR0VNSU5JX0FQSV9LRVlcbiAgICBcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgY29uc29sZS5lcnJvcignTm8gQVBJIGtleSBmb3VuZCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKVxuICAgICAgXG4gICAgICAvLyBFbiBsdWdhciBkZSBmYWxsYXIsIGRldm9sdmVyIHVuIGFuw6FsaXNpcyBkZSBkZW1vXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICByZXNwb25zZTogZ2VuZXJhdGVEZW1vQW5hbHlzaXMoKSxcbiAgICAgICAgZGVtbzogdHJ1ZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBVc2FyIGVsIHNlcnZpY2lvIGRlIEdlbWluaVxuICAgIGNvbnN0IGdlbWluaSA9IG5ldyBHZW1pbmlTZXJ2aWNlKGFwaUtleSlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW1pbmkuZ2VuZXJhdGVDb250ZW50KHByb21wdClcblxuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dlbWluaSBzZXJ2aWNlIGVycm9yOicsIHJlc3VsdC5lcnJvcilcbiAgICAgIFxuICAgICAgLy8gU2kgZmFsbGEgR2VtaW5pLCBkZXZvbHZlciBhbsOhbGlzaXMgZGUgZGVtb1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgcmVzcG9uc2U6IGdlbmVyYXRlRGVtb0FuYWx5c2lzKCksXG4gICAgICAgIGRlbW86IHRydWUsXG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IHJlc3VsdC5lcnJvclxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBSZXNwdWVzdGEgZXhpdG9zYSBkZSBHZW1pbmlcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlc3BvbnNlOiByZXN1bHQucmVzcG9uc2UsXG4gICAgICBkZW1vOiBmYWxzZVxuICAgIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBUEkgUm91dGUgRXJyb3I6JywgZXJyb3IpXG4gICAgXG4gICAgLy8gRW4gY2FzbyBkZSBlcnJvciwgZGV2b2x2ZXIgYW7DoWxpc2lzIGRlIGRlbW9cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlc3BvbnNlOiBnZW5lcmF0ZURlbW9BbmFseXNpcygpLFxuICAgICAgZGVtbzogdHJ1ZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBkZXNjb25vY2lkbydcbiAgICB9KVxuICB9XG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZ2VuZXJhciBhbsOhbGlzaXMgZGUgZGVtbyBjdWFuZG8gR2VtaW5pIG5vIGVzdMOhIGRpc3BvbmlibGVcbmZ1bmN0aW9uIGdlbmVyYXRlRGVtb0FuYWx5c2lzKCk6IHN0cmluZyB7XG4gIGNvbnN0IGluc2lnaHRzID0gW1xuICAgIHtcbiAgICAgIHRpcG86ICdzdWNjZXNzJyxcbiAgICAgIHRpdHVsbzogJ01hcmdlbiBkZSBHYW5hbmNpYSBTYWx1ZGFibGUnLFxuICAgICAgZGVzY3JpcGNpb246ICdUdSBtYXJnZW4gZGVsIDM1JSBzdXBlcmEgZWwgcHJvbWVkaW8gZGVsIHNlY3RvciAoMzAlKS4gTWFudMOpbiBlc3RhIGVmaWNpZW5jaWEgb3BlcmF0aXZhLicsXG4gICAgICBpbXBhY3RvOiAnaGlnaCcsXG4gICAgICBtZXRyaWNhOiAnMzUlJyxcbiAgICAgIGFjY2lvbjogZmFsc2VcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpcG86ICd3YXJuaW5nJyxcbiAgICAgIHRpdHVsbzogJ0Nvc3RvcyBMYWJvcmFsZXMgRWxldmFkb3MnLFxuICAgICAgZGVzY3JpcGNpb246ICdMb3MgY29zdG9zIGRlIHBlcnNvbmFsICgyOCUpIGV4Y2VkZW4gZWwgb2JqZXRpdm8gZGVsIDI1JS4gUmV2aXNhIGhvcmFyaW9zIGVuIGhvcmFzIHZhbGxlLicsXG4gICAgICBpbXBhY3RvOiAnbWVkaXVtJyxcbiAgICAgIG1ldHJpY2E6ICcyOCUnLFxuICAgICAgYWNjaW9uOiB0cnVlXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXBvOiAnb3Bwb3J0dW5pdHknLFxuICAgICAgdGl0dWxvOiAnUG90ZW5jaWFsIGVuIFRpY2tldCBQcm9tZWRpbycsXG4gICAgICBkZXNjcmlwY2lvbjogJ0F1bWVudGFyICQ1IGVsIHRpY2tldCBwcm9tZWRpbyBnZW5lcmFyw61hICQxNSwwMDAgYWRpY2lvbmFsZXMgYWwgbWVzLicsXG4gICAgICBpbXBhY3RvOiAnaGlnaCcsXG4gICAgICBtZXRyaWNhOiAnKyQxNUsnLFxuICAgICAgYWNjaW9uOiB0cnVlXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXBvOiAnb3Bwb3J0dW5pdHknLFxuICAgICAgdGl0dWxvOiAnT3B0aW1pemFjacOzbiBkZSBJbnZlbnRhcmlvJyxcbiAgICAgIGRlc2NyaXBjaW9uOiAnUmVkdWNpciBpbnZlbnRhcmlvIGxlbnRvIGVuIDIwJSBsaWJlcmFyw61hICQ4LDAwMCBlbiBjYXBpdGFsIGRlIHRyYWJham8uJyxcbiAgICAgIGltcGFjdG86ICdtZWRpdW0nLFxuICAgICAgbWV0cmljYTogJyQ4SycsXG4gICAgICBhY2Npb246IHRydWVcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpcG86ICdpbmZvJyxcbiAgICAgIHRpdHVsbzogJ0NyZWNpbWllbnRvIGRlIENsaWVudGVzJyxcbiAgICAgIGRlc2NyaXBjaW9uOiAnQmFzZSBkZSBjbGllbnRlcyBjcmVjacOzIDE1JSBlc3RlIG1lcy4gSW1wbGVtZW50YSBwcm9ncmFtYSBkZSBmaWRlbGl6YWNpw7NuLicsXG4gICAgICBpbXBhY3RvOiAnbWVkaXVtJyxcbiAgICAgIG1ldHJpY2E6ICcrMTUlJyxcbiAgICAgIGFjY2lvbjogZmFsc2VcbiAgICB9XG4gIF1cblxuICAvLyBGb3JtYXRlYXIgY29tbyByZXNwdWVzdGEgZGUgR2VtaW5pXG4gIHJldHVybiBpbnNpZ2h0cy5tYXAoaW5zaWdodCA9PiBgXG5bVElQT106ICR7aW5zaWdodC50aXBvfVxuW1TDjVRVTE9dOiAke2luc2lnaHQudGl0dWxvfVxuW0RFU0NSSVBDScOTTl06ICR7aW5zaWdodC5kZXNjcmlwY2lvbn1cbltJTVBBQ1RPXTogJHtpbnNpZ2h0LmltcGFjdG99XG5bTcOJVFJJQ0FdOiAke2luc2lnaHQubWV0cmljYX1cbltBQ0NJw5NOXTogJHtpbnNpZ2h0LmFjY2lvbn1cbiAgYCkuam9pbignXFxuXFxuJylcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiR2VtaW5pU2VydmljZSIsIk9QVElPTlMiLCJyZXF1ZXN0Iiwic3RhdHVzIiwiaGVhZGVycyIsIlBPU1QiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsImpzb24iLCJwcm9tcHQiLCJ0ZXN0Iiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJlcnJvciIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsIk5FWFRfUFVCTElDX0dFTUlOSV9BUElfS0VZIiwicmVzcG9uc2UiLCJnZW5lcmF0ZURlbW9BbmFseXNpcyIsImRlbW8iLCJnZW1pbmkiLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJvcmlnaW5hbEVycm9yIiwiRXJyb3IiLCJpbnNpZ2h0cyIsInRpcG8iLCJ0aXR1bG8iLCJkZXNjcmlwY2lvbiIsImltcGFjdG8iLCJtZXRyaWNhIiwiYWNjaW9uIiwibWFwIiwiaW5zaWdodCIsImpvaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai/analyze/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/gemini.ts":
/*!********************************!*\
  !*** ./lib/services/gemini.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeminiService: () => (/* binding */ GeminiService)\n/* harmony export */ });\n// lib/services/gemini.ts\n// Servicio centralizado para manejar Gemini API\nclass GeminiService {\n    constructor(apiKey){\n        this.baseUrl = \"https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent\";\n        this.apiKey = apiKey || process.env.GEMINI_API_KEY || \"AIzaSyB_nrbCNAYMesrpGshnDaPSz6pNlW8kksg\" || 0;\n    }\n    async generateContent(prompt) {\n        if (!this.apiKey) {\n            return {\n                success: false,\n                error: \"API key no configurada. Por favor configura GEMINI_API_KEY en las variables de entorno.\"\n            };\n        }\n        try {\n            const response = await fetch(`${this.baseUrl}?key=${this.apiKey}`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    contents: [\n                        {\n                            parts: [\n                                {\n                                    text: prompt\n                                }\n                            ]\n                        }\n                    ],\n                    generationConfig: {\n                        temperature: 0.7,\n                        topK: 40,\n                        topP: 0.95,\n                        maxOutputTokens: 1024\n                    },\n                    safetySettings: [\n                        {\n                            category: \"HARM_CATEGORY_HARASSMENT\",\n                            threshold: \"BLOCK_NONE\"\n                        },\n                        {\n                            category: \"HARM_CATEGORY_HATE_SPEECH\",\n                            threshold: \"BLOCK_NONE\"\n                        },\n                        {\n                            category: \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n                            threshold: \"BLOCK_NONE\"\n                        },\n                        {\n                            category: \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n                            threshold: \"BLOCK_NONE\"\n                        }\n                    ]\n                })\n            });\n            if (!response.ok) {\n                const errorData = await response.json();\n                console.error(\"Gemini API Error:\", errorData);\n                // Manejo específico de errores comunes\n                if (response.status === 403) {\n                    return {\n                        success: false,\n                        error: \"Acceso denegado. Verifica que tu API key sea v\\xe1lida y tenga los permisos necesarios.\"\n                    };\n                }\n                return {\n                    success: false,\n                    error: errorData.error?.message || `Error ${response.status}: ${response.statusText}`\n                };\n            }\n            const data = await response.json();\n            const aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text;\n            if (!aiResponse) {\n                return {\n                    success: false,\n                    error: \"No se recibi\\xf3 respuesta de Gemini AI\"\n                };\n            }\n            return {\n                success: true,\n                response: aiResponse\n            };\n        } catch (error) {\n            console.error(\"Error calling Gemini:\", error);\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Error desconocido al conectar con Gemini\"\n            };\n        }\n    }\n    // Método para verificar si la API está disponible\n    async checkStatus() {\n        if (!this.apiKey) return false;\n        try {\n            const result = await this.generateContent('Hello, respond with \"OK\" if you receive this.');\n            return result.success;\n        } catch  {\n            return false;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VydmljZXMvZ2VtaW5pLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSx5QkFBeUI7QUFDekIsZ0RBQWdEO0FBaUJ6QyxNQUFNQTtJQUlYQyxZQUFZQyxNQUFlLENBQUU7YUFGckJDLFVBQVU7UUFHaEIsSUFBSSxDQUFDRCxNQUFNLEdBQUdBLFVBQVVFLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJRix5Q0FBc0MsSUFBSTtJQUNsRztJQUVBLE1BQU1JLGdCQUFnQkMsTUFBYyxFQUFvRTtRQUN0RyxJQUFJLENBQUMsSUFBSSxDQUFDUCxNQUFNLEVBQUU7WUFDaEIsT0FBTztnQkFDTFEsU0FBUztnQkFDVEMsT0FBTztZQUNUO1FBQ0Y7UUFFQSxJQUFJO1lBQ0YsTUFBTUMsV0FBVyxNQUFNQyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUNWLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDRCxNQUFNLENBQUMsQ0FBQyxFQUFFO2dCQUNqRVksUUFBUTtnQkFDUkMsU0FBUztvQkFDUCxnQkFBZ0I7Z0JBQ2xCO2dCQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7b0JBQ25CQyxVQUFVO3dCQUFDOzRCQUNUQyxPQUFPO2dDQUFDO29DQUNOQyxNQUFNWjtnQ0FDUjs2QkFBRTt3QkFDSjtxQkFBRTtvQkFDRmEsa0JBQWtCO3dCQUNoQkMsYUFBYTt3QkFDYkMsTUFBTTt3QkFDTkMsTUFBTTt3QkFDTkMsaUJBQWlCO29CQUNuQjtvQkFDQUMsZ0JBQWdCO3dCQUNkOzRCQUNFQyxVQUFVOzRCQUNWQyxXQUFXO3dCQUNiO3dCQUNBOzRCQUNFRCxVQUFVOzRCQUNWQyxXQUFXO3dCQUNiO3dCQUNBOzRCQUNFRCxVQUFVOzRCQUNWQyxXQUFXO3dCQUNiO3dCQUNBOzRCQUNFRCxVQUFVOzRCQUNWQyxXQUFXO3dCQUNiO3FCQUNEO2dCQUNIO1lBQ0Y7WUFFQSxJQUFJLENBQUNqQixTQUFTa0IsRUFBRSxFQUFFO2dCQUNoQixNQUFNQyxZQUFZLE1BQU1uQixTQUFTb0IsSUFBSTtnQkFDckNDLFFBQVF0QixLQUFLLENBQUMscUJBQXFCb0I7Z0JBRW5DLHVDQUF1QztnQkFDdkMsSUFBSW5CLFNBQVNzQixNQUFNLEtBQUssS0FBSztvQkFDM0IsT0FBTzt3QkFDTHhCLFNBQVM7d0JBQ1RDLE9BQU87b0JBQ1Q7Z0JBQ0Y7Z0JBRUEsT0FBTztvQkFDTEQsU0FBUztvQkFDVEMsT0FBT29CLFVBQVVwQixLQUFLLEVBQUV3QixXQUFXLENBQUMsTUFBTSxFQUFFdkIsU0FBU3NCLE1BQU0sQ0FBQyxFQUFFLEVBQUV0QixTQUFTd0IsVUFBVSxDQUFDLENBQUM7Z0JBQ3ZGO1lBQ0Y7WUFFQSxNQUFNQyxPQUF1QixNQUFNekIsU0FBU29CLElBQUk7WUFDaEQsTUFBTU0sYUFBYUQsS0FBS0UsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFQyxTQUFTcEIsT0FBTyxDQUFDLEVBQUUsRUFBRUM7WUFFOUQsSUFBSSxDQUFDaUIsWUFBWTtnQkFDZixPQUFPO29CQUNMNUIsU0FBUztvQkFDVEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsT0FBTztnQkFDTEQsU0FBUztnQkFDVEUsVUFBVTBCO1lBQ1o7UUFFRixFQUFFLE9BQU8zQixPQUFPO1lBQ2RzQixRQUFRdEIsS0FBSyxDQUFDLHlCQUF5QkE7WUFDdkMsT0FBTztnQkFDTEQsU0FBUztnQkFDVEMsT0FBT0EsaUJBQWlCOEIsUUFBUTlCLE1BQU13QixPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRUEsa0RBQWtEO0lBQ2xELE1BQU1PLGNBQWdDO1FBQ3BDLElBQUksQ0FBQyxJQUFJLENBQUN4QyxNQUFNLEVBQUUsT0FBTztRQUV6QixJQUFJO1lBQ0YsTUFBTXlDLFNBQVMsTUFBTSxJQUFJLENBQUNuQyxlQUFlLENBQUM7WUFDMUMsT0FBT21DLE9BQU9qQyxPQUFPO1FBQ3ZCLEVBQUUsT0FBTTtZQUNOLE9BQU87UUFDVDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3ZhLWZpbmFuY2UtcGxhdGZvcm0vLi9saWIvc2VydmljZXMvZ2VtaW5pLnRzP2IxYjciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL3NlcnZpY2VzL2dlbWluaS50c1xuLy8gU2VydmljaW8gY2VudHJhbGl6YWRvIHBhcmEgbWFuZWphciBHZW1pbmkgQVBJXG5cbmludGVyZmFjZSBHZW1pbmlSZXNwb25zZSB7XG4gIGNhbmRpZGF0ZXM/OiBBcnJheTx7XG4gICAgY29udGVudD86IHtcbiAgICAgIHBhcnRzPzogQXJyYXk8e1xuICAgICAgICB0ZXh0Pzogc3RyaW5nXG4gICAgICB9PlxuICAgIH1cbiAgfT5cbiAgdXNhZ2VNZXRhZGF0YT86IHtcbiAgICBwcm9tcHRUb2tlbkNvdW50PzogbnVtYmVyXG4gICAgY2FuZGlkYXRlc1Rva2VuQ291bnQ/OiBudW1iZXJcbiAgICB0b3RhbFRva2VuQ291bnQ/OiBudW1iZXJcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2VtaW5pU2VydmljZSB7XG4gIHByaXZhdGUgYXBpS2V5OiBzdHJpbmdcbiAgcHJpdmF0ZSBiYXNlVXJsID0gJ2h0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLXBybzpnZW5lcmF0ZUNvbnRlbnQnXG5cbiAgY29uc3RydWN0b3IoYXBpS2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXkgfHwgcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR0VNSU5JX0FQSV9LRVkgfHwgJydcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlQ29udGVudChwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyByZXNwb25zZT86IHN0cmluZzsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIGlmICghdGhpcy5hcGlLZXkpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiAnQVBJIGtleSBubyBjb25maWd1cmFkYS4gUG9yIGZhdm9yIGNvbmZpZ3VyYSBHRU1JTklfQVBJX0tFWSBlbiBsYXMgdmFyaWFibGVzIGRlIGVudG9ybm8uJyBcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9P2tleT0ke3RoaXMuYXBpS2V5fWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29udGVudHM6IFt7XG4gICAgICAgICAgICBwYXJ0czogW3tcbiAgICAgICAgICAgICAgdGV4dDogcHJvbXB0XG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dLFxuICAgICAgICAgIGdlbmVyYXRpb25Db25maWc6IHtcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgICAgICB0b3BLOiA0MCxcbiAgICAgICAgICAgIHRvcFA6IDAuOTUsXG4gICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDEwMjQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYWZldHlTZXR0aW5nczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjYXRlZ29yeTogXCJIQVJNX0NBVEVHT1JZX0hBUkFTU01FTlRcIixcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX05PTkVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IFwiSEFSTV9DQVRFR09SWV9IQVRFX1NQRUVDSFwiLFxuICAgICAgICAgICAgICB0aHJlc2hvbGQ6IFwiQkxPQ0tfTk9ORVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjYXRlZ29yeTogXCJIQVJNX0NBVEVHT1JZX1NFWFVBTExZX0VYUExJQ0lUXCIsXG4gICAgICAgICAgICAgIHRocmVzaG9sZDogXCJCTE9DS19OT05FXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBcIkhBUk1fQ0FURUdPUllfREFOR0VST1VTX0NPTlRFTlRcIixcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX05PTkVcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dlbWluaSBBUEkgRXJyb3I6JywgZXJyb3JEYXRhKVxuICAgICAgICBcbiAgICAgICAgLy8gTWFuZWpvIGVzcGVjw61maWNvIGRlIGVycm9yZXMgY29tdW5lc1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICAgIGVycm9yOiAnQWNjZXNvIGRlbmVnYWRvLiBWZXJpZmljYSBxdWUgdHUgQVBJIGtleSBzZWEgdsOhbGlkYSB5IHRlbmdhIGxvcyBwZXJtaXNvcyBuZWNlc2FyaW9zLicgXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgZXJyb3I6IGVycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCBgRXJyb3IgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCBcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhOiBHZW1pbmlSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgY29uc3QgYWlSZXNwb25zZSA9IGRhdGEuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0XG5cbiAgICAgIGlmICghYWlSZXNwb25zZSkge1xuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgZXJyb3I6ICdObyBzZSByZWNpYmnDsyByZXNwdWVzdGEgZGUgR2VtaW5pIEFJJyBcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgIHJlc3BvbnNlOiBhaVJlc3BvbnNlIFxuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgR2VtaW5pOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Vycm9yIGRlc2Nvbm9jaWRvIGFsIGNvbmVjdGFyIGNvbiBHZW1pbmknIFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIE3DqXRvZG8gcGFyYSB2ZXJpZmljYXIgc2kgbGEgQVBJIGVzdMOhIGRpc3BvbmlibGVcbiAgYXN5bmMgY2hlY2tTdGF0dXMoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLmFwaUtleSkgcmV0dXJuIGZhbHNlXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVDb250ZW50KCdIZWxsbywgcmVzcG9uZCB3aXRoIFwiT0tcIiBpZiB5b3UgcmVjZWl2ZSB0aGlzLicpXG4gICAgICByZXR1cm4gcmVzdWx0LnN1Y2Nlc3NcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIkdlbWluaVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImFwaUtleSIsImJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJORVhUX1BVQkxJQ19HRU1JTklfQVBJX0tFWSIsImdlbmVyYXRlQ29udGVudCIsInByb21wdCIsInN1Y2Nlc3MiLCJlcnJvciIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb250ZW50cyIsInBhcnRzIiwidGV4dCIsImdlbmVyYXRpb25Db25maWciLCJ0ZW1wZXJhdHVyZSIsInRvcEsiLCJ0b3BQIiwibWF4T3V0cHV0VG9rZW5zIiwic2FmZXR5U2V0dGluZ3MiLCJjYXRlZ29yeSIsInRocmVzaG9sZCIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImNvbnNvbGUiLCJzdGF0dXMiLCJtZXNzYWdlIiwic3RhdHVzVGV4dCIsImRhdGEiLCJhaVJlc3BvbnNlIiwiY2FuZGlkYXRlcyIsImNvbnRlbnQiLCJFcnJvciIsImNoZWNrU3RhdHVzIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/gemini.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fanalyze%2Froute&page=%2Fapi%2Fai%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fanalyze%2Froute.ts&appDir=%2Fworkspaces%2Fnova-finance-platform%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2Fnova-finance-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();